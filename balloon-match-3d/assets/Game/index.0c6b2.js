System.register("chunks:///_virtual/Game",["./U3dParticle2Cocos.ts"],(function(){return{setters:[null],execute:function(){}}}));

System.register("chunks:///_virtual/U3dParticle2Cocos.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var a,o,t,i,r,l,n,s,p,c,u,d,m;return{setters:[function(e){a=e.inheritsLoose},function(e){o=e.cclegacy,t=e._decorator,i=e.Enum,r=e.ExtrapolationMode,l=e.CurveRange,n=e.ColorKey,s=e.AlphaKey,p=e.GradientRange,c=e.ParticleSystem,u=e.Burst,d=e.Node,m=e.Component}],execute:function(){var h,y;o._RF.push({},"82c58vDm8tBIqlQiWKOzZ5k","U3dParticle2Cocos",void 0);var v=t.ccclass,M=(t.property,t.executeInEditMode),g=function(e){return e[e.Box=0]="Box",e[e.Circle=1]="Circle",e[e.Cone=2]="Cone",e[e.Sphere=3]="Sphere",e[e.Hemisphere=4]="Hemisphere",e}(g||{}),C=function(e){return e[e.Base=0]="Base",e[e.Edge=1]="Edge",e[e.Shell=2]="Shell",e[e.Volume=3]="Volume",e}(C||{}),f=i({Random:0,Loop:1,PingPong:2}),R=((h={})[0]=r.PING_PONG,h[1]=r.LOOP,h[2]=r.CLAMP,h);e("U3dParticle2Cocos",v("U3dParticle2Cocos")(y=M(y=function(e){function o(){return e.apply(this,arguments)||this}a(o,e);var t=o.prototype;return t.start=function(){},t.update=function(e){},t.setColor=function(e,a){e.r=255*a.r,e.g=255*a.g,e.b=255*a.b,e.a=255*a.a},t.applyTransform=function(e,a){var o=a.m_LocalPosition;e.position=o,e.rotation=a.m_LocalRotation,e.scale=a.m_LocalScale},t.applyRealCurve=function(e,a){e.addKeyFrame,e.preExtrapolation=R[a.m_PreInfinity],e.postExtrapolation=R[a.m_PostInfinity];for(var o=0;o<a.m_Curve.length;o++){var t=a.m_Curve[o];e.addKeyFrame(t.time,t.value);var i=e.getKeyframeValue(o);i.leftTangent=t.inSlope,i.rightTangent=t.outSlope}},t.applyCurveRange=function(e,a){switch(e.mode=a.minMaxState,e.mode){case l.Mode.Constant:e.constant=a.scalar;break;case l.Mode.Curve:e.spline,this.applyRealCurve(e.spline,a.maxCurve);break;case l.Mode.TwoCurves:this.applyRealCurve(e.splineMin,a.minCurve),this.applyRealCurve(e.splineMax,a.maxCurve);break;case l.Mode.TwoConstants:e.constantMin=a.minScalar,e.constantMax=a.scalar}},t.applyGradient=function(e,a){e.mode=a.m_Mode;var o=[],t=[];if(a.m_NumColorKeys>0)for(var i=0;i<a.m_NumColorKeys;i++){var r=new n;this.setColor(r.color,a["key"+i]),o.push(r)}if(a.m_NUmAlphaKeys>0)for(var l=0;l<a.m_NUmAlphaKeys;l++){var p=new s;p.alpha=255*a["key"+l].a,t.push(p)}e.setKeys(o,t)},t.applyGradientRange=function(e,a){switch(e.mode=a.minMaxState,e.mode){case p.Mode.Color:this.setColor(e.color,a.maxColor);break;case p.Mode.Gradient:this.applyGradient(e.gradient,a.maxGradient);break;case p.Mode.TwoColors:this.setColor(e.colorMin,a.minColor),this.setColor(e.colorMax,a.maxColor);break;case p.Mode.TwoGradients:this.applyGradient(e.gradientMin,a.minGradient),this.applyGradient(e.gradientMax,a.maxGradient)}},t.applyShapeArc=function(e,a){e.arcMode=a.arc.mode,e.arc=a.arc.value,e.arcMode!=f.Loop&&e.arcMode!=f.PingPong||(e.arcSpread=a.arc.spreed,this.applyCurveRange(e.arcSpeed,a.arc.speed))},t.applyShapeModule=function(e,a){var o=e.shapeModule;switch(a.type){case 5:o.shapeType=g.Box,o.emitFrom=C.Volume;break;case 15:o.shapeType=g.Box,o.emitFrom=C.Shell;break;case 16:o.shapeType=g.Box,o.emitFrom=C.Edge;break;case 10:o.shapeType=g.Circle;break;case 4:o.shapeType=g.Cone,o.emitFrom=C.Base;break;case 8:o.shapeType=g.Cone,o.emitFrom=C.Volume;break;case 0:o.shapeType=g.Sphere;break;case 2:o.shapeType=g.Hemisphere}switch(o.position.set(a.m_Position),o.rotation.set(a.m_Rotation),o.scale.set(a.m_Scale),o.alignToDirection=!!a.alignToDirection,o.randomDirectionAmount=a.randomDirectionAmount,o.sphericalDirectionAmount=a.sphericalDirectionAmount,o.randomPositionAmount=a.randomPositionAmount,o.shapeType){case g.Box:o.boxThickness.set(a.boxThickness);break;case g.Circle:o.radius=a.radius.value,this.applyShapeArc(o,a);break;case g.Cone:o.radius=a.radius.value,o.radiusThickness=a.radiusThickness,o.angle=a.angle,this.applyShapeArc(o,a),o.length=a.length;break;case g.Sphere:case g.Hemisphere:o.radius=a.radius.value,o.radiusThickness=a.radiusThickness,this.applyShapeArc(o,a)}},t.applyVelocityOvertimeModule=function(e,a){var o=e.velocityOvertimeModule;this.applyCurveRange(o.x,a.x),this.applyCurveRange(o.y,a.y),this.applyCurveRange(o.z,a.z),this.applyCurveRange(o.speedModifier,a.speedModifier),0==a.inWorldSpace?o.space=1:1==a.inWorldSpace&&(o.space=0)},t.applyForceOvertimeModule=function(e,a){var o=e.forceOvertimeModule;this.applyCurveRange(o.x,a.x),this.applyCurveRange(o.y,a.y),this.applyCurveRange(o.z,a.z),0==a.inWorldSpace?o.space=1:1==a.inWorldSpace&&(o.space=0)},t.applySizeOvertimeModule=function(e,a){var o=e.sizeOvertimeModule;o.separateAxes=!!a.separateAxes,this.applyCurveRange(o.size,a.curve),o.separateAxes&&(this.applyCurveRange(o.x,a.curve),this.applyCurveRange(o.y,a.y),this.applyCurveRange(o.z,a.z))},t.applyRotationOvertimeModule=function(e,a){var o=e.rotationOvertimeModule;o.separateAxes=!!a.separateAxes,this.applyCurveRange(o.z,a.curve),o.separateAxes&&(this.applyCurveRange(o.x,a.x),this.applyCurveRange(o.y,a.y))},t.applyColorOverLifetimeModule=function(e,a){var o=e.colorOverLifetimeModule;this.applyGradientRange(o.color,a.gradient)},t.applyTextureAnimationModule=function(e,a){0!=a.mode&&console.warn("cocos creator的TextureAnimationModule目前只支持gird模式");var o=e.textureAnimationModule;o.numTilesX=a.tilesX,o.numTilesY=a.tilesY,o.animation=a.animationType,this.applyCurveRange(o.frameOverTime,a.frameOverTime),this.applyCurveRange(o.startFrame,a.startFrame),o.cycleCount=a.cycles,o.randomRow=1==a.rowMode,0==a.rowMode&&(o.rowIndex=a.rowIndex),2==a.rowMode&&console.warn("u3d粒子系统 textureAnimationModule中的rowMode模式meshIndex cocos creator中没有支持")},t.applyLimitVelocityOvertimeModule=function(e,a){var o=e.limitVelocityOvertimeModule;0==a.inWorldSpace?o.space=1:1==a.inWorldSpace&&(o.space=0),o.dampen=a.dampen,o.separateAxes=!!a.separateAxes,o.separateAxes?(this.applyCurveRange(o.limitX,a.x),this.applyCurveRange(o.limitY,a.y),this.applyCurveRange(o.limitZ,a.z)):this.applyCurveRange(o.limit,a.x)},t.applyTrailModule=function(e,a){0!=a.mode&&console.warn("cocos creator 粒子系统的拖尾目前支持支particles模式");var o=e.trailModule;this.applyCurveRange(o.lifeTime,a.lifetime),this.applyCurveRange(o.widthRatio,a.widthOverTrail),o.minParticleDistance=a.minVertexDistance,this.applyGradientRange(o.colorOverTrail,a.colorOverTrail),this.applyGradientRange(o.colorOvertime,a.colorOverLifetime),o.minParticleDistance=a.minVertexDistance,0==a.inWorldSpace?o.space=1:1==a.inWorldSpace&&(o.space=0),o.widthFromParticle=!!a.sizeAffectsWidth,o.colorFromParticle=!!a.inheritParticleColor,this.applyGradientRange(o.colorOverTrail,a.colorOverTrail),this.applyGradientRange(o.colorOvertime,a.colorOverLifetime)},t.applyParticleSystem=function(e,a){var o=e.addComponent(c);if(o.duration=a.lengthInSec,o.capacity=a.InitialModule.maxNumParticles,o.loop=!!a.looping,o.playOnAwake=!!a.playOnAwake,o.simulationSpeed=a.simulationSpeed,this.applyCurveRange(o.startDelay,a.startDelay),this.applyCurveRange(o.startLifetime,a.InitialModule.startLifetime),this.applyGradientRange(o.startColor,a.InitialModule.startColor),o.scaleSpace=a.scalingMode,o.startSize3D=!!a.InitialModule.size3D,this.applyCurveRange(o.startSizeX,a.InitialModule.startSize),o.startSize3D&&(this.applyCurveRange(o.startSizeY,a.InitialModule.startSizeY),this.applyCurveRange(o.startSizeZ,a.InitialModule.startSizeZ)),this.applyCurveRange(o.startSpeed,a.InitialModule.startSpeed),o.startRotation3D=!!a.InitialModule.rotation3D,o.startRotation3D&&(this.applyCurveRange(o.startRotationX,a.InitialModule.startRotationX),this.applyCurveRange(o.startRotationX,a.InitialModule.startRotationY),this.applyCurveRange(o.startRotationX,a.InitialModule.startRotation)),this.applyCurveRange(o.gravityModifier,a.InitialModule.gravityModifier),this.applyCurveRange(o.rateOverTime,a.EmissionModule.rateOverTime),this.applyCurveRange(o.rateOverDistance,a.EmissionModule.rateOverDistance),a.EmissionModule.m_BurstCount>0){for(var t=[],i=0;i<a.EmissionModule.m_BurstCount;i++){var r=a.EmissionModule.m_Bursts[i],l=new u;l.repeatCount=0==r.cycleCount?1/0:r.cycleCount,this.applyCurveRange(l.count,r.countCurve),l.repeatInterval=r.repeatInterval,l.time=r.time,t.push(l)}o.bursts=t}o.noiseModule.enable=!!a.NoiseModule.enabled,o.noiseModule.enable&&(o.noiseModule.octaves=a.NoiseModule.octaves,o.noiseModule.octaves>1&&(o.noiseModule.octaveScale=a.NoiseModule.octaveScale,o.noiseModule.octaveMultiplier=a.NoiseModule.octaveMultiplier),o.noiseModule.noiseFrequency=a.NoiseModule.frequency,0!=a.NoiseModule.strength.minMaxState&&console.warn("cocos creator粒子系统的noiseModule的strength是一个固定值！"),0!=a.NoiseModule.strengthY.minMaxState&&console.warn("cocos creator粒子系统的noiseModule的strength是一个固定值！"),0!=a.NoiseModule.strengthZ.minMaxState&&console.warn("cocos creator粒子系统的noiseModule的strength是一个固定值！"),o.noiseModule.strengthX=a.NoiseModule.strength.scalar,o.noiseModule.strengthY=a.NoiseModule.strengthY.scalar,o.noiseModule.strengthZ=a.NoiseModule.strengthZ.scalar),o.shapeModule.enable=!!a.ShapeModule.enabled,o.shapeModule.enable&&this.applyShapeModule(o,a.ShapeModule),o.velocityOvertimeModule.enable=!!a.VelocityModule.enabled,o.velocityOvertimeModule.enable&&this.applyVelocityOvertimeModule(o,a.VelocityModule),o.forceOvertimeModule.enable=!!a.ForceModule.enabled,o.forceOvertimeModule.enable&&this.applyForceOvertimeModule(o,a.ForceModule),o.sizeOvertimeModule.enable=!!a.SizeModule.enabled,o.sizeOvertimeModule.enable&&this.applySizeOvertimeModule(o,a.SizeModule),o.rotationOvertimeModule.enable=!!a.RotationModule.enabled,o.rotationOvertimeModule.enable&&this.applyRotationOvertimeModule(o,a.RotationModule),o.colorOverLifetimeModule.enable=!!a.ColorModule.enabled,o.colorOverLifetimeModule.enable&&this.applyColorOverLifetimeModule(o,a.ColorModule),o.textureAnimationModule.enable=!!a.UVModule.enabled,o.textureAnimationModule.enable&&this.applyTextureAnimationModule(o,a.UVModule),o.limitVelocityOvertimeModule.enable=!!a.ClampVelocityModule.enabled,o.limitVelocityOvertimeModule.enable&&this.applyLimitVelocityOvertimeModule(o,a.ClampVelocityModule),a.TrailModule.enabled&&o.trailModule.onInit(o),o.trailModule.enable=!!a.TrailModule.enabled,a.TrailModule.enabled&&this.applyTrailModule(o,a.TrailModule)},t.applyParticleSystemRenderer=function(e,a){e.getComponent(c).renderer.renderMode=a.m_RenderMode,5==a.m_RenderMode&&console.warn("cocos creator 暂不支持none模式的renderMode")},t.createNode=function(e,a,o){console.log("创建节点",a.json.m_Name);var t=new d;t.name=a.json.m_Name,e.addChild(t);for(var i=0;i<a.cmps.length;i++){var r=a.cmps[i];"Transform"==r.u3dType?this.applyTransform(t,r):"ParticleSystem"==r.u3dType?this.applyParticleSystem(t,r):"ParticleSystemRenderer"==r.u3dType&&this.applyParticleSystemRenderer(t,r)}if(a.children.length>0)for(var l=0;l<a.children.length;l++){var n=a.children[l].fileID,s=o[n];s||console.log("fileID:"+n+" child is not exist"),this.createNode(t,s,o)}},t.createPrefab=function(e){var a,o=[],t=[],i={},r=[];e.forEach((function(e){"GameObject"==e.u3dType?o.push({json:e,cmps:[]}):(r[e.fileID]=e,t.push(e))})),o.forEach((function(e){for(var o=0;o<e.json.m_Component.length;o++){var t=e.json.m_Component[o].component.fileID,l=r[t];e.cmps.push(l),"Transform"==l.u3dType&&(i[l.fileID]=e,e.children=l.m_Children,"id0"==l.m_Father.fileID&&(a=e))}})),a?(console.log("创建预制体",a.json.m_Name),this.createNode(this.node,a,i)):(console.log(t),console.log("no root"))},t.doConvert=function(e){for(var a=0;a<e.length;a++)this.createPrefab(e[a])},o}(m))||y)||y);o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/Game', 'chunks:///_virtual/Game'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});